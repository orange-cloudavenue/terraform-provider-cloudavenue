---
page_title: "cloudavenue_elb_policies_http_response Resource - cloudavenue"
subcategory: "ELB (EdgeGateway Load Balancer)"
description: |-
  The cloudavenue_elb_policies_http_response resource allows you to manage HTTP response policies. HTTP response rules can be used to to evaluate and modify the response and response attributes that the application returns.
---

# cloudavenue_elb_policies_http_response (Resource)

The `cloudavenue_elb_policies_http_response` resource allows you to manage HTTP response policies. HTTP response rules can be used to to evaluate and modify the response and response attributes that the application returns.

## Example Usage

```terraform
resource "cloudavenue_elb_policies_http_response" "example" {
  virtual_service_id = cloudavenue_elb_virtual_service.example.id
  policies = [
    // Policy 1
    {
      name = "example"

      // Define the criteria for the policy
      criteria = {
        client_ip = {
          criteria = "IS_IN"
          ip_addresses = [
            "12.13.14.15",
            "12.13.14.0/24",
            "12.13.14.1-12.13.14.15"
          ]
        }
        cookie = {
          criteria = "BEGINS_WITH"
          name     = "example"
          value    = "example"
        }
        http_methods = {
          criteria = "IS_IN"
          methods  = ["GET", "POST"]
        }
        path = {
          criteria = "CONTAINS"
          paths    = ["/example"]
        }
        protocol = "HTTPS"
        query = [
          "example=example"
        ]
        request_headers = [
          {
            criteria = "CONTAINS"
            name     = "X-EXAMPLE"
            values   = ["example"]
          },
          {
            criteria = "BEGINS_WITH"
            name     = "X-CUSTOM"
            values   = ["example"]
          }
        ]
        response_headers = [
          {
            criteria = "CONTAINS"
            name     = "X-RESPONSE"
            values   = ["example"]
          },
          {
            criteria = "BEGINS_WITH"
            name     = "X-RESPONSE-CUSTOM"
            values   = ["example"]
          }
        ]
        service_ports = {
          criteria = "IS_IN"
          ports    = ["443"]
        }
        location = {
          criteria = "BEGINS_WITH"
          values = [
            "example.com"
          ]
        }
        status_code = {
          criteria = "IS_IN"
          codes    = ["200", "302"]
        }
      }

      // Define the action to take when the criteria is met
      actions = {

        location_rewrite = {
          host       = "example.org"
          protocol   = "HTTPS"
          keep_query = true
          port       = 443
        }

        modify_headers = [
          {
            action = "ADD"
            name   = "X-FROM-OLD-DOMAIN"
            value  = "example.com"
          }
        ]
      }
    } // End policy 1
  ]   // End policies
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `policies` (Attributes List) HTTP response policies. (see [below for nested schema](#nestedatt--policies))
- `virtual_service_id` (String) <i style="color:red;font-weight: bold">(ForceNew)</i> The ID of the virtual service to which the policies http response belongs.

### Read-Only

- `id` (String) The ID of the policies http response.

<a id="nestedatt--policies"></a>
### Nested Schema for `policies`

Required:

- `actions` (Attributes) Actions to perform when the rule matches. (see [below for nested schema](#nestedatt--policies--actions))
- `criteria` (Attributes) Match criteria for the HTTP response. (see [below for nested schema](#nestedatt--policies--criteria))
- `name` (String) The name of the policy.

Optional:

- `active` (Boolean) Whether the policy is active or not. Value defaults to `true`.
- `logging` (Boolean) Enable logging for this policy. Value defaults to `false`.

<a id="nestedatt--policies--actions"></a>
### Nested Schema for `policies.actions`

Optional:

- `location_rewrite` (Attributes) Redirects the request to different location. (see [below for nested schema](#nestedatt--policies--actions--location_rewrite))
- `modify_headers` (Attributes Set) Modify HTTP request headers. (see [below for nested schema](#nestedatt--policies--actions--modify_headers))

<a id="nestedatt--policies--actions--location_rewrite"></a>
### Nested Schema for `policies.actions.location_rewrite`

Required:

- `port` (Number) Port to which redirect the request. Value must be between 1 and 65535.
- `protocol` (String) HTTP protocol. Value must be one of : `HTTP`, `HTTPS`.

Optional:

- `host` (String) Host to which redirect the request. Default is the original host.
- `keep_query` (Boolean) Keep or drop the query of the incoming request URI in the redirected URI. Value defaults to `true`.
- `path` (String) Path to which redirect the request. Default is the original path.


<a id="nestedatt--policies--actions--modify_headers"></a>
### Nested Schema for `policies.actions.modify_headers`

Required:

- `action` (String) Action to perform on the header. Value must be one of : `ADD`, `REMOVE`, `REPLACE`.
- `name` (String) Name of the HTTP header to modify. String length must be at most 128.

Optional:

- `value` (String) Value of the HTTP header to modify. String length must be at most 128.



<a id="nestedatt--policies--criteria"></a>
### Nested Schema for `policies.criteria`

Optional:

- `client_ip` (Attributes) Match the rule based on client IP address rules. (see [below for nested schema](#nestedatt--policies--criteria--client_ip))
- `cookie` (Attributes) Match the rule based on cookie rules. (see [below for nested schema](#nestedatt--policies--criteria--cookie))
- `http_methods` (Attributes) Match the rule based on HTTP method rules. (see [below for nested schema](#nestedatt--policies--criteria--http_methods))
- `location` (Attributes) Match the rule based on location rules. (see [below for nested schema](#nestedatt--policies--criteria--location))
- `path` (Attributes) Match the rule based on path rules. (see [below for nested schema](#nestedatt--policies--criteria--path))
- `protocol` (String) Protocol to match. Value must be one of : `HTTP`, `HTTPS`.
- `query` (Set of String) Text contained in the query string.
- `request_headers` (Attributes Set) Match the rule based on request headers rules. (see [below for nested schema](#nestedatt--policies--criteria--request_headers))
- `response_headers` (Attributes Set) Match the rule based on response headers rules. (see [below for nested schema](#nestedatt--policies--criteria--response_headers))
- `service_ports` (Attributes) Match the rule based on service port rules. (see [below for nested schema](#nestedatt--policies--criteria--service_ports))
- `status_code` (Attributes) Match the rule based on response HTTP status code. (see [below for nested schema](#nestedatt--policies--criteria--status_code))

<a id="nestedatt--policies--criteria--client_ip"></a>
### Nested Schema for `policies.criteria.client_ip`

Required:

- `criteria` (String) Criteria to match. Value must be one of : `IS_IN`, `IS_NOT_IN`.
- `ip_addresses` (Set of String) IP addresses to match. Element value must satisfy all validations: The value must be at least one of the following :
a valid IPV4 address (Ex: 192.168.0.1), a valid IPV4 address with CIDR (Ex: 192.168.0.1/24), a valid IPV4 address range (Ex: 192.168.0.1-192.168.0.100).


<a id="nestedatt--policies--criteria--cookie"></a>
### Nested Schema for `policies.criteria.cookie`

Required:

- `criteria` (String) Criteria to match. Value must be one of : `BEGINS_WITH`, `DOES_NOT_BEGIN_WITH`, `CONTAINS`, `DOES_NOT_CONTAIN`, `ENDS_WITH`, `DOES_NOT_END_WITH`, `EQUALS`, `DOES_NOT_EQUAL`.
- `name` (String) Name of the cookie to match.

Optional:

- `value` (String) Value of the cookie to match. If the value of [`<.criteria`](#<.criteria) attribute is one of `EXISTS` or `DOES_NOT_EXIST` this attribute is **NULL**. If the value of [`<.criteria`](#<.criteria) attribute is one of `BEGINS_WITH`, `DOES_NOT_BEGIN_WITH`, `CONTAINS`, `DOES_NOT_CONTAIN`, `ENDS_WITH`, `DOES_NOT_END_WITH`, `EQUALS` or `DOES_NOT_EQUAL` this attribute is **REQUIRED**. String length must be at most 10240.


<a id="nestedatt--policies--criteria--http_methods"></a>
### Nested Schema for `policies.criteria.http_methods`

Required:

- `criteria` (String) Criteria to match. Value must be one of : `IS_IN`, `IS_NOT_IN`.
- `methods` (Set of String) Methods to match. Element value must satisfy all validations: value must be one of: ["GET" "POST" "PUT" "DELETE" "PATCH" "OPTIONS" "TRACE" "CONNECT" "PROPFIND" "PROPPATCH" "MKCOL" "COPY" "MOVE" "LOCK" "UNLOCK"].


<a id="nestedatt--policies--criteria--location"></a>
### Nested Schema for `policies.criteria.location`

Required:

- `criteria` (String) Criteria to match. Value must be one of : `BEGINS_WITH`, `DOES_NOT_BEGIN_WITH`, `CONTAINS`, `DOES_NOT_CONTAIN`, `ENDS_WITH`, `DOES_NOT_END_WITH`, `EQUALS`, `DOES_NOT_EQUAL`, `REGEX_MATCH`, `REGEX_DOES_NOT_MATCH`.
- `values` (Set of String) A set of locations to match given criteria.


<a id="nestedatt--policies--criteria--path"></a>
### Nested Schema for `policies.criteria.path`

Required:

- `criteria` (String) Criteria to match. Value must be one of : `BEGINS_WITH`, `DOES_NOT_BEGIN_WITH`, `CONTAINS`, `DOES_NOT_CONTAIN`, `ENDS_WITH`, `DOES_NOT_END_WITH`, `EQUALS`, `DOES_NOT_EQUAL`, `REGEX_MATCH`, `REGEX_DOES_NOT_MATCH`.
- `paths` (Set of String) A set of paths to match given criteria.


<a id="nestedatt--policies--criteria--request_headers"></a>
### Nested Schema for `policies.criteria.request_headers`

Required:

- `criteria` (String) Criteria to match. Value must be one of : `BEGINS_WITH`, `DOES_NOT_BEGIN_WITH`, `CONTAINS`, `DOES_NOT_CONTAIN`, `ENDS_WITH`, `DOES_NOT_END_WITH`, `EQUALS`, `DOES_NOT_EQUAL`, `EXISTS`, `DOES_NOT_EXIST`.
- `name` (String) Name of the HTTP header whose value is to be matched.

Optional:

- `values` (Set of String) Values of the HTTP header to match.


<a id="nestedatt--policies--criteria--response_headers"></a>
### Nested Schema for `policies.criteria.response_headers`

Required:

- `criteria` (String) Criteria to match. Value must be one of : `BEGINS_WITH`, `DOES_NOT_BEGIN_WITH`, `CONTAINS`, `DOES_NOT_CONTAIN`, `ENDS_WITH`, `DOES_NOT_END_WITH`, `EQUALS`, `DOES_NOT_EQUAL`, `EXISTS`, `DOES_NOT_EXIST`.
- `name` (String) Name of the HTTP header whose value is to be matched.

Optional:

- `values` (Set of String) Values of the HTTP header to match.


<a id="nestedatt--policies--criteria--service_ports"></a>
### Nested Schema for `policies.criteria.service_ports`

Required:

- `criteria` (String) Criteria to match. Value must be one of : `IS_IN`, `IS_NOT_IN`.
- `ports` (Set of Number) Ports to match. Element value must satisfy all validations: value must be between 1 and 65535.


<a id="nestedatt--policies--criteria--status_code"></a>
### Nested Schema for `policies.criteria.status_code`

Required:

- `codes` (Set of String) HTTP Status codes or range to match. (Example: `200` or `301-304`) Warning: all ports must have valid HTTP return codes. `200-299` are invalid range because they are not a valid HTTP status code.
- `criteria` (String) Criteria to match. Value must be one of : `IS_IN`, `IS_NOT_IN`.

## Import

Import is supported using the following syntax:
```shell
terraform import cloudavenue_elb_policies_http_response.example virtual_service_id
```