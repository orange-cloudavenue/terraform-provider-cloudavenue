---
page_title: "cloudavenue_vdcg_firewall Resource - cloudavenue"
subcategory: "vDC Group (Virtual Datacenter Group)"
description: |-
  The cloudavenue_vdcg_firewall resource allows you to manage a firewall in a VDC Group. The firewall is a set of rules that are applied to the VDC Group networks to control the traffic.
---

# cloudavenue_vdcg_firewall (Resource)

The `cloudavenue_vdcg_firewall` resource allows you to manage a firewall in a VDC Group. The firewall is a set of rules that are applied to the VDC Group networks to control the traffic.
 
## Example Usage

```terraform
resource "cloudavenue_vdcg_firewall" "example" {
  vdc_group_name = cloudavenue_vdcg.example.name
  rules = [
    {
      action      = "ALLOW"
      name        = "allow all IPv4 traffic"
      direction   = "IN_OUT"
      ip_protocol = "IPV4"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `rules` (Attributes List) The list of rules to apply to the firewall. List must contain at least 1 elements. (see [below for nested schema](#nestedatt--rules))

### Optional

- `enabled` (Boolean) Defines if the firewall is enabled or not. Value defaults to `true`.
- `vdc_group_id` (String) <i style="color:red;font-weight: bold">(ForceNew)</i> The ID of the VDC Group to which the firewall belongs. Ensure that at least one attribute from this collection is set: [vdc_group_name,vdc_group_id]. This value must start with `urn:vcloud:vdcGroup:`.
- `vdc_group_name` (String) <i style="color:red;font-weight: bold">(ForceNew)</i> The name of the VDC Group to which the firewall belongs. Ensure that at least one attribute from this collection is set: [vdc_group_name,vdc_group_id].

### Read-Only

- `id` (String) The ID of the firewall. The firewall does not have an ID. It is identified by the VDC Group ID.

<a id="nestedatt--rules"></a>
### Nested Schema for `rules`

Required:

- `action` (String) Defines if the rule should matching traffic. Value must be one of : `ALLOW`, `DROP`, `REJECT`.
- `direction` (String) The direction of the rule. Value must be one of : `IN_OUT`, `OUT`, `IN`.
- `name` (String) The name of the rule.

Optional:

- `app_port_profile_ids` (Set of String) A set of [Application Port Profile](https://registry.terraform.io/providers/orange-cloudavenue/cloudavenue/latest/docs/resources/vdcg_app_port_profile) IDs. Leaving it empty means `Any` (all).
- `destination_groups_excluded` (Boolean) Reverses value of `destination_ids` for the rule to match everything except specified IDs. Value defaults to `false`.
- `destination_ids` (Set of String) A set of Destination Firewall Group IDs ([`IP Sets`](https://registry.terraform.io/providers/orange-cloudavenue/cloudavenue/latest/docs/resources/vdcg_ip_set), [`Security Groups`](https://registry.terraform.io/providers/orange-cloudavenue/cloudavenue/latest/docs/resources/vdcg_security_group) or [`Dynamic Security Group`](https://registry.terraform.io/providers/orange-cloudavenue/cloudavenue/latest/docs/resources/vdcg_dynamic_security_group)). Leaving it empty means `Any` (all).
- `enabled` (Boolean) Defines if the rule is enabled or not. Value defaults to `true`.
- `ip_protocol` (String) The IP protocol of the rule. Value defaults to `IPV4`. Value must be one of : `IPV4`, `IPV6`, `IPV4_IPV6`.
- `logging` (Boolean) Defines if the rule should log matching traffic. Value defaults to `false`.
- `source_groups_excluded` (Boolean) Reverses value of `source_ids` for the rule to match everything except specified IDs. Value defaults to `false`.
- `source_ids` (Set of String) A set of Source Firewall Group IDs ([`IP Sets`](https://registry.terraform.io/providers/orange-cloudavenue/cloudavenue/latest/docs/resources/vdcg_ip_set), [`Security Groups`](https://registry.terraform.io/providers/orange-cloudavenue/cloudavenue/latest/docs/resources/vdcg_security_group) or [`Dynamic Security Group`](https://registry.terraform.io/providers/orange-cloudavenue/cloudavenue/latest/docs/resources/vdcg_dynamic_security_group)). Leaving it empty means `Any` (all).

Read-Only:

- `id` (String) The ID of the rule.

## Advanced usages 

### With Application Port Profile 

This example shows how to create a firewall with an application port profile.
```terraform
resource "cloudavenue_vdcg_firewall" "example_with_app_port_profile" {
  vdc_group_name = cloudavenue_vdcg.example.name
  rules = [
    {
      action    = "ALLOW"
      name      = "allow all IPv4 traffic"
      direction = "IN_OUT"
      app_port_profile_ids = [
        data.cloudavenue_edgegateway_app_port_profile.example.id,
      ]
    }
  ]
}
```

### With Source IDS

This example shows how to create a firewall with a source IDS. The default value of the destination IDS is `any`.
```terraform
resource "cloudavenue_vdcg_firewall" "example_with_source_ids" {
  vdc_group_name = cloudavenue_vdcg.example.name
  enabled        = true
  rules = [
    {
      action    = "ALLOW"
      name      = "allow in IPv4 traffic"
      direction = "IN"
      source_ids = [
        cloudavenue_vdcg_ip_set.example.id,
        cloudavenue_vdcg_security_group.example.id
      ]
    }
  ]
}
```

### With Destination IDS

This example shows how to create a firewall with a destination IDS. The default value of the source IDS is `any`.
```terraform
resource "cloudavenue_vdcg_firewall" "example_with_destination_ids" {
  vdc_group_name = cloudavenue_vdcg.example.name
  enabled        = true
  rules = [
    {
      action    = "ALLOW"
      name      = "allow out IPv4 traffic"
      direction = "OUT"
      destination_ids = [
        cloudavenue_vdcg_ip_set.example.id,
        cloudavenue_vdcg_security_group.example.id
      ]
    }
  ]
}
```

### Full 

This example shows how to create a firewall with all the possible attributes.
```terraform
resource "cloudavenue_vdcg_firewall" "example_full" {
  vdc_group_name = cloudavenue_vdcg.example.name
  enabled        = true
  rules = [
    {
      action    = "ALLOW"
      name      = "allow all IPv4 traffic"
      direction = "IN"
      source_ids = [
        cloudavenue_vdcg_ip_set.example.id,
      ],
      destination_ids = [
        cloudavenue_vdcg_security_group.example.id,
      ],
      app_port_profile_ids = [
        data.cloudavenue_edgegateway_app_port_profile.example_provider_scope.id,
      ]
      source_groups_excluded      = true
      destination_groups_excluded = true
    },
    {
      action    = "DROP"
      name      = "drop IPv4 traffic"
      direction = "IN"
      source_ids = [
        cloudavenue_vdcg_ip_set.example.id,
      ],
      destination_ids = [
        cloudavenue_vdcg_security_group.example.id,
      ],
      app_port_profile_ids = [
        data.cloudavenue_edgegateway_app_port_profile.example_provider_scope.id,
        data.cloudavenue_edgegateway_app_port_profile.example_system_scope.id
      ]
      source_groups_excluded      = false
      destination_groups_excluded = false
    }
  ]
}
```

## Import

Import is supported using the following syntax:
```shell
# VDC Group Firewall can be imported using the VDC Group name or ID.
terraform import cloudavenue_vdcg_firewall.example vdcGroupNameOrID
```