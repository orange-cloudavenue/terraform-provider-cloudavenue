---
page_title: "cloudavenue_edgegateway_nat_rule Resource - cloudavenue"
subcategory: "Edge Gateway (Tier-1)"
description: |-
  The cloudavenue_edgegateway_nat_rule resource allows you to manage EdgeGateway NAT rule. To change the source IP address from a private to a public IP address, you create a source NAT (SNAT) rule. To change the destination IP address from a public to a private IP address, you create a destination NAT (DNAT) rule.
---

# cloudavenue_edgegateway_nat_rule (Resource)

The `cloudavenue_edgegateway_nat_rule` resource allows you to manage EdgeGateway NAT rule. To change the source IP address from a private to a public IP address, you create a source NAT (SNAT) rule. To change the destination IP address from a public to a private IP address, you create a destination NAT (DNAT) rule.

## Example Usage

```terraform
# Example NAT Rule SNAT (NAT out from network 11.11.11.0/24 to dest 8.8.8.8 translate in 89.32.25.10)
resource "cloudavenue_edgegateway_nat_rule" "example-snat" {
  edge_gateway_id = cloudavenue_edgegateway.example.id

  name        = "example-snat"
  rule_type   = "SNAT"
  description = "description SNAT example"

  external_address         = "89.32.25.10"
  internal_address         = "11.11.11.0/24"
  snat_destination_address = "8.8.8.8"

  priority = 10
}

# Example NAT Rule DNAT (Translate 89.32.25.10 to internal dest 4.11.11.11 on port 8080)
resource "cloudavenue_edgegateway_nat_rule" "example-dnat" {
  edge_gateway_id = cloudavenue_edgegateway.example.id

  name        = "example-dnat"
  rule_type   = "DNAT"
  description = "description DNAT example"

  external_address = "89.32.25.10"
  internal_address = "4.11.11.11"

  dnat_external_port = "8080"
}

# Example NAT Rule Reflexive (Nat in both way (in and out) external and internal on all port translated)
resource "cloudavenue_edgegateway_nat_rule" "example-reflexive" {
  edge_gateway_id = cloudavenue_edgegateway.example.id

  name        = "example-reflexive"
  rule_type   = "REFLEXIVE"
  description = "description REFLEXIVE example"

  external_address = "89.32.25.10"
  internal_address = "192.168.0.1"

  priority = 25
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The Name of the NAT rule.
- `rule_type` (String) <i style="color:red;font-weight: bold">(ForceNew)</i> NAT rule type. Value must be one of: 
  - `DNAT` Rule translates the external IP to an internal IP and is used for inbound traffic.
  - `NO_DNAT` Prevents external IP translation.
  - `SNAT` Translates an internal IP to an external IP and is used for outbound traffic.
  - `NO_SNAT` Prevents internal IP translation.
  - `REFLEXIVE` This translates an internal IP to an external IP and vice versa.

### Optional

- `app_port_profile_id` (String) Application Port Profile ID to which the rule applies. This value must start with `urn:vcloud:applicationPortProfile:`. If the value of [`rule_type`](#rule_type) attribute is one of `SNAT`, `NO_SNAT`, `NO_DNAT` or `REFLEXIVE` this attribute is **NULL**.
- `description` (String) A description of the NAT rule.
- `dnat_external_port` (String) This represents the external port number or port range when doing DNAT port forwarding from external to internal. If not specify, all ports are translated. If the value of [`rule_type`](#rule_type) attribute is one of `SNAT`, `NO_SNAT` or `REFLEXIVE` this attribute is **NULL**.
- `edge_gateway_id` (String) <i style="color:red;font-weight: bold">(ForceNew)</i> The ID of the Edge Gateway. Ensure that one and only one attribute from this collection is set : `edge_gateway_name`, `edge_gateway_id`.
- `edge_gateway_name` (String) <i style="color:red;font-weight: bold">(ForceNew)</i> The Name of the Edge Gateway. Ensure that one and only one attribute from this collection is set : `edge_gateway_name`, `edge_gateway_id`.
- `enabled` (Boolean) Enable or Disable the NAT rule. Value defaults to `true`.
- `external_address` (String) The external address for the NAT Rule. This must be supplied as a single IP or Network CIDR. For a DNAT rule, this is the external facing IP Address for incoming traffic. For an SNAT rule, this is the external facing IP Address for outgoing traffic. These IPs are typically allocated/suballocated IP Addresses on the Edge Gateway. For a REFLEXIVE rule, these are the external facing IPs. If the value of [`rule_type`](#rule_type) attribute is `NO_SNAT` this attribute is **NULL**. If the value of [`rule_type`](#rule_type) attribute is one of `DNAT`, `SNAT`, `NO_DNAT` or `REFLEXIVE` this attribute is **REQUIRED**.
- `firewall_match` (String) You can set a firewall match rule to determine how firewall is applied during NAT. Value must be one of: 
  - `MATCH_INTERNAL_ADDRESS` Applies firewall rule to the internal address of a NAT rule.
  - `MATCH_EXTERNAL_ADDRESS` Applies firewall rule to the external address of a NAT rule.
  - `BYPASS` Skip applying firewall rule to NAT rule.
- `internal_address` (String) The internal address for the NAT Rule. This must be supplied as a single IP or Network CIDR. For a DNAT rule, this is the internal IP address for incoming traffic. For an SNAT rule, this is the internal IP Address for outgoing traffic. For a REFLEXIVE rule, these are the internal IPs. These IPs are typically the Private IPs that are allocated to workloads. If the value of [`rule_type`](#rule_type) attribute is `NO_DNAT` this attribute is **NULL**. If the value of [`rule_type`](#rule_type) attribute is one of `DNAT`, `NO_SNAT` or `REFLEXIVE` this attribute is **REQUIRED**.
- `priority` (Number) If an address has multiple NAT rule, you can assign these rule different priorities to determine the order in which they are applied. A lower value means a higher priority for this rule. Value defaults to `0`.
- `snat_destination_address` (String) The destination addresses to match in the SNAT Rule. This must be supplied as a single IP or Network CIDR. Providing no value for this field results in match with ANY destination network. If the value of [`rule_type`](#rule_type) attribute is one of `DNAT`, `NO_DNAT` or `REFLEXIVE` this attribute is **NULL**.

### Read-Only

- `id` (String) The ID of the NAT rule.

## Import

 -> **NAT rules with same name**
 If the NAT rules have the same name, you must use the ID instead of the name to retrieve the rule.
 
```shell
# The following NAT rules with Name 'dnat1' are available
# Please use ID instead of Name in import path to pick exact rule
  | Error: Multiple NAT Rules found with the same name
  | 
  | [...]
  |
  | ID                                       NAME         TYPE      
  | c3dcf9f8-77c4-462e-9ca5-2d35a3b04170     SAMENAME     DNAT      
  | 420554b0-50bd-4859-96a7-9a16bdc2fe9a     SAMENAME     DNAT 

$ terraform import cloudavenue_edgegateway_nat_rule.example edgeGatewayIDOrName.f40e3d68-cfa6-42ea-83ed-5571659b3e7b
```
Import is supported using the following syntax:
```shell
terraform import cloudavenue_edgegateway_nat_rule.example edgeGatewayIDOrName.natRuleNameOrID
```