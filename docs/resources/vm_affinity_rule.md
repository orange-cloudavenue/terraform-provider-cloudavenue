---
page_title: "cloudavenue_vm_affinity_rule Resource - cloudavenue"
subcategory: "VM (Virtual Machine)"
description: |-
  Provides a Cloud Avenue VM Affinity Rule. This can be used to create, modify and delete VM affinity and anti-affinity rules.
---

# cloudavenue_vm_affinity_rule (Resource)

Provides a Cloud Avenue VM Affinity Rule. This can be used to create, modify and delete VM affinity and anti-affinity rules.

## Example Usage

```terraform
resource "cloudavenue_vm_affinity_rule" "example" {
  name     = "test"
  polarity = "Affinity"

  vm_ids = [
    "urn:vcloud:vm:70b78935-cb64-4418-9607-4e3aeabbd168",
    "urn:vcloud:vm:c3912ae5-bbd1-45ae-8b1e-694d0a405a95"
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) VM affinity rule name.
- `polarity` (String) (ForceNew) The polarity of the affinity rule. Value must be one of : `Affinity`, `Anti-Affinity`.
- `vm_ids` (List of String) List of VM IDs to apply the affinity rule to. List must contain at most 2 elements. Element value must satisfy all validations: must be a valid URN.

### Optional

- `enabled` (Boolean) `True` if this affinity rule is enabled. Value defaults to `true`.
- `required` (Boolean) `True` if this affinity rule is required. When a rule is mandatory, a host failover will not power on the VM if doing so would violate the rule. Value defaults to `true`.
- `vdc` (String) (ForceNew) The name of vDC to use, optional if defined at provider level.

### Read-Only

- `id` (String) The ID of the affinity rule.

## Import

Import is supported using the following syntax:
```shell
# If `vDC` is not specified, the default `vDC` will be used
# The `affinityRuleIdentifier` can be either a name or an ID. If it is a name, it will succeed only if the name is unique.
terraform import cloudavenue_vm_affinity_rule.example affinityRuleIdentifier

# or you can specify the vDC
terraform import cloudavenue_vm_affinity_rule.example myVDC.affinityRuleIdentifier
```
